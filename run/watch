#! /usr/bin/env node

var root = require('./lib/rootpath')

var watch = require('glob-watcher')

var paths = [ 'template/*' ].map(path => root(path))

var cmd = require('command-promise').so

watch(paths, gen)

gen()

console.info('watch is up')

function gen ()
{
	cmd('run/gen', { cwd: root() })()
	.then(cmd('run/install', { cwd: root() }))
	.then(() => console.info('generated'))
}
